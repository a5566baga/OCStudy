# 07-08

---
#协议与代理
###一、什么是协议
	1、协议是OC的一种语法
	2、OC的协议，类似于JAVA中接口，用来规范函数声明，实现多继承或对象间通信的一种语法。
####协议的代码实现
#####main.m
```
#import <Foundation/Foundation.h>
#import "Rabbite.h"

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Rabbite * rabbite = [[Rabbite alloc] init];
        NSLog(@"color: %@", rabbite.color);
        [rabbite jump];
        [rabbite eat];
        [rabbite sleep];
//        [rabbite time];
        [rabbite shape];
        [rabbite release];
    }
    return 0;
}
```
#####Rabbite.h
```
#import <Foundation/Foundation.h>
#import "NatureProtocol.h"

//协议可以直接声明在类文件中
@protocol RabbiteProtocol <NSObject>

-(void)shape;

@end

@interface Rabbite : NSObject<NatureProtocol, RabbiteProtocol>
//遵从一个协议的方式
//@interface 类名 : 父类名<协议名，协议名。。。>
//协议只是一堆方法声明
//注：当一个类尊崇了某个协议，那么协议就会将协议内部的方法暴露出来
//       当一个类可以最受多个协议，多个协议应该写在同一个<>内

@property(nonatomic, copy)NSString * color;
@property(nonatomic, assign)NSInteger  age;

@end
```
#####Rabbite.m
```
#import "Rabbite.h"

@implementation Rabbite

-(void)dealloc{
    NSLog(@"兔子成仙走了。。。。");
    [self.color release];
    [super dealloc];
}

- (instancetype)init
{
    self = [super init];
    if (self) {
        self.color = @"write";
        self.age = 2;
    }
    return self;
}

-(void)jump{
    NSLog(@"兔子跳！！！");
}

-(void)sleep{
    NSLog(@"兔子白天睡觉。。。");
}

-(void)eat{
    NSLog(@"兔子吃东西！！！");
}

-(void)time{
    NSLog(@"活到100岁就成精了！！！");
}

-(void)shape{
    NSLog(@"垂耳兔子。。。");
}

@end
```
#####NatureProtocol.h
```
#import <Foundation/Foundation.h>

//协议只.h文件
//协议书写格式
//@protocol 协议名 <NSObject> 基本协议

//协议可以直接声明在类文件中
@protocol NatureProtocol <NSObject>

//3、缺省是必选项
//4、权限以下方法都是指定的权限，直到遇到其它权限为止
@required
-(void)eat;

-(void)jump;

//1、@required 是一个必选项 (只是一种说放上的这个方法必须要实现， 但在代码中可以不去实现)。不实现会出现警告。
-(void)sleep;

//2、@optional 是可选项，可以不实现，也不会出现警告。
@optional
-(void)drink;

@end

//一个.h中可以多个协议
//协议可以尊崇其它协议，作用相当于继承其它协议的方法声明
@protocol timeProtocol <NatureProtocol>

-(void)time;

@end
```
###二、协议中声明的方法，有两种权限
	1、@required:（缺省）必须的,不实现有警告，即遵从协议的类，必须实现这个方法
	2、@optional:可选的，遵从协议的类，如果实现了这个方法，如果没实现也没关系。

###三、协议的作用
	1、协议的重要用处，一个是规范接口。
	2、可实现多继承
	3、实现多对象间交互的一种机制,解耦合
####耦合的实现Demo
#####main.h
```
//解耦合
#import <Foundation/Foundation.h>
#import "Boss.h"

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        Boss * boss = [[Boss alloc] init];
        [boss clear];
        
        [boss release];
    }
    return 0;
}
```
#####Boss.h
```

```
#####Boss.m
#####Cleaner.h
#####Cleaner.m
#####ClearProtocol.h
---
##协议的声明格式
###
---
##协议的作业
![协议作业](Snip20160708_18.png)

---
