# 07-13
---
#JSON的使用
####JSON(JavaScript Object Notation) 是一种轻量级的数据交换格式。它基于JavaScript（Standard ECMA-262 3rd Edition - December 1999）的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C, OC,C++, C#, Java, JavaScript, Perl, Python等）。这些特性使JSON成为理想的数据交换语言。 易于人阅读和编写，同时也易于机器解析和生成(网络传输速度)。
####优点：适用于各种平台
---
##使用规则:
    •	数据在名称/值对中
	•	每一条数据由逗号分隔
	•	花括号保存对象   @{@“”:@“”} == {“”:””}
	•	方括号保存数组   @[@“one”,@“two”] == [“one”,”two”];
##JSON值:
###JSON 值可以是：
	•	数字（整数或浮点数）int  float
	•	字符串（在双引号中）””
	•	逻辑值（true 或 false）BOOL YES NO
	•	数组（在方括号中）
	•	对象（在花括号中）
	•	null（空）
##JSON的基本结构:
####Json的结构简单说就是javascript中的对象和数组，所以这两种结构就是对象和数组两种结构，通过这两种结构可以表示各种复杂的结构
| **1、字典：对象在js中表示为“{}”括起来的内容，数据结构为 {key：value,key：value,...}的键值对的结构，在面向对象的语言中，key为对象的属性，value为对应的属性值，所以很容易理 解，取值方法为 对象.key 获取属性值，这个属性值的类型可以是 数字、字符串、数组、对象几种。** |
| -- |
| **2、数组：数组在js中是中括号“[]”括起来的内容，数据结构为 [“jave”,”javascript","vb",...]，取值方式和所有语言中一样，使用索引获取，字段值的类型可以是 数字、字符串、数组、对象几种。** |
---
##简单的JSON书写
####通过NSString书写正确的书写格式，然后通过框架自带JSON解析的方法进行解析
```
NSDictionary * dic = @{@"01":@"zhang", @"02":@"wang"};
//        写json字符串时，可以有整型、逻辑型，但通过NSJSONSerialization转换成对象以后就没有了整型和逻辑型。
//        重点：要知道json字符串中的数据和转换成对象的数据是不完全一样的
        NSString * json = @"{\"01\":\"zhang\", \"02\":\"wang\"}";
        NSString * json2 = @"{\"01\":[\"zhang\", true], \"02\":[\"wang\", false]}";
        NSData * data = [json dataUsingEncoding:NSUTF8StringEncoding];
        NSData * data2 = [json2 dataUsingEncoding:NSUTF8StringEncoding];
        NSError * err = nil;
//        通过这种手段转换为我们需要的数据
        /*
         NSJSONReadingMutableContainers = (1UL << 0),会把json数据转换成可变的数组/字典
         NSJSONReadingMutableLeaves = (1UL << 1),会把json数据转换成不可变的数/字典      
         NSJSONReadingAllowFragments = (1UL << 2)，几乎没人用，作用吧json数据转换为非数组，但实际上并没有关系
         */
//        从数组或字典取出的元素可能是bool的吗？
//        不可能是bool的，因为数组或字典中存储的是对象
//        NSMutableDictionary * obj = [NSJSONSerialization JSONObjectWithData:data2 options:NSJSONReadingMutableLeaves error:&err];
        id * obj = [NSJSONSerialization JSONObjectWithData:data2 options:NSJSONReadingAllowFragments error:&err];
//        [obj setObject:@[@"li", @(false)] forKey:@"03"];
        NSLog(@"%@", obj);
        [obj writeToFile:PATH atomically:NO];
```
