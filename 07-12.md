# 07-12

---
#文件管理
###NSFileManager /  NSFilehandle  / plist文件 / NSData 的使用
---
##NSFileManager
####单例模式是一种常用的设计模式。在应用这个模式时，单例对象的类必须保证只有一个实例存在，而且自行实例化并向整个系统提供这个实例。
####也就是说，对于一个单例类，不论实例化对象多少次，都只有一个对象实例，而且这个实例是全局的能被整个系统访问到,就像全局变量一样可以 被整个工程共享它的数据。
###功能——
    查看    创建    拷贝   移动   删除  等等
#####单例的体现
```
NSFileManager * fm = [NSFileManager defaultManager];
        NSFileManager * fm1 = [NSFileManager defaultManager];
        NSLog(@"%p  %p", fm, fm1);
        
        User *u1 = [User defaultUser];
        User *u2 = [User defaultUser];
        NSLog(@"%p %p", u1, u2);
```
####对于目录下的文件遍历有深遍历和浅遍历
#####浅遍历——contentsOfDirectoryAtPath: PATH error:&err
```
NSFileManager * fm = [NSFileManager defaultManager];
        NSError * err = nil;
//        遍历或是查看文件内容，注：不仅会得到文件夹名还会获取文件名，包含隐藏文件
//       [fm contentsOfDirectoryAtPath:文件夹的目录(如果是一个文件是没有意义的) error:&存放错误信息]
        NSMutableString * path = [PATH stringByAppendingString:@"sss"];
//        浅遍历
        NSArray * array = [fm contentsOfDirectoryAtPath: PATH error:&err];
        NSLog(@"%@", array);
```
#####深遍历——subpathsOfDirectoryAtPath:PATH error:&err
```
//        subpathsOfDirectoryAtPath 不仅会获取当前文件夹下的内容，还会下载子文件夹的内容。
//        深遍历
        NSArray * path2 = [fm subpathsOfDirectoryAtPath:PATH error:&err];
```
#####获取文件扩展名的两种方式
    1、if ([path hasPrefix:@".ppng"]) {
               NSLog(@"%@", path);
      }
    2、if([[path pathExtension] isEqualToString:@"png"]){
                NSLog(@"%@", path);
      }
####创建文件的方式
```
#import <Foundation/Foundation.h>
#define PATH @"/Users/zhangzengqiang/Desktop/张增强/Dir"
#define PATH2 @"/Users/zhangzengqiang/Desktop/张增强/Dir/OK"
int main(int argc, const char * argv[]) {
    @autoreleasepool {
        NSFileManager * fm = [NSFileManager defaultManager];
        NSString * newPath1 = [PATH stringByAppendingPathComponent:@"ios3"];
        NSString * newPath2 = [PATH2 stringByAppendingPathComponent:@"ooook"];
        NSError * err = nil;
//        学一下创建
        BOOL create =  [fm createDirectoryAtPath:newPath1 withIntermediateDirectories:YES attributes:nil error:&err];
        BOOL create2 =  [fm createDirectoryAtPath:newPath2 withIntermediateDirectories:YES attributes:nil error:&err];
//        [fm createDirectoryAtPath:文件创建路径 withIntermediateDirectories:自动补全不存在的文件路径(中间路径)YES (不管目录是否存在都会创建成功)/ NO时会报错attributes:文件的属性 error:错误信息];
        if(create == true){
            NSLog(@"创建成功");
        }else{
            NSLog(@"创建失败 %@", err);
        }
        
        NSString * file1 = [PATH stringByAppendingPathComponent:@"12.txt"];
//        创建文件，PATH 是路径 ，comtents是文件内容。attributes 是属性
        BOOL fileCreate =  [fm createFileAtPath:file1 contents:nil attributes:nil];
        if (fileCreate == true) {
            NSLog(@"file successful");
        }else {
            NSLog(@"file failed.....");
        }
        
//        获取文件属性
        /**
         *
        NSDictionary * attr = [fm attributesOfItemAtPath:PATH error:nil];
        NSLog(@"%@", attr);
        NSDictionary * dic = [fm attributesOfFileSystemForPath:PATH error:nil];
        NSLog(@"%@", dic);
         */
        
    }
    return 0;
}
```
---
